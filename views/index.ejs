<!DOCTYPE html>
<html lang="tr">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CanlÄ± MaÃ§ Skoru</title>
    <!-- BAÅžLANGIÃ‡: BURASI CSS KODU (STÄ°L) -->
    <style>
        body { font-family: 'Inter', Arial, sans-serif; color: #333; margin: 0; padding: 20px; background-color: #eef3f7; }
        .mac-sonucu {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            max-width: 650px;
            margin: 20px auto;
            border-top: 5px solid #1e3a8a;
        }
        h1 { text-align: center; font-size: 32px; margin-bottom: 25px; color: #1e3a8a; }
        .skor-tablosu { display: flex; justify-content: center; align-items: center; font-weight: bold; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #e5e7eb; }
        .skor-tablosu h2 { margin: 0 15px; font-size: 60px; color: #000; }
        .ayirici { padding: 0 20px; font-size: 40px; color: #9ca3af; }
        
        .olay-listesi { display: flex; justify-content: space-between; width: 100%; margin-top: 10px; }
        .ev-sahibi-olaylar, .deplasman-olaylar { flex: 1; padding: 5px; display: flex; flex-direction: column; }
        .ev-sahibi-olaylar { align-items: flex-end; padding-right: 15px; }
        .deplasman-olaylar { align-items: flex-start; padding-left: 15px; }
        
        .oyuncu-olay { 
            display: flex; align-items: center; margin-bottom: 10px; font-size: 16px; padding: 5px 0;
            background-color: #f9fafb; border-radius: 4px; width: auto; 
        }
        .ev-sahibi-olaylar .oyuncu-olay { flex-direction: row-reverse; justify-content: flex-end; }
        .deplasman-olaylar .oyuncu-olay { flex-direction: row; justify-content: flex-start; }

        .dakika { font-weight: bold; margin: 0 5px; color: #4b5563; min-width: 30px; }
        .ikon { font-size: 20px; margin: 0 5px; line-height: 1; }
        .gol-ikonu { color: #10b981; }
        .kirmizi-kart-ikonu { color: #ef4444; }
        .sari-kart-ikonu { color: #facc15; }
        .kamera-ikonu { color: #6366f1; }
        .oyuncu-adi { font-weight: 500; color: #1f2937; margin: 0 5px; }
        
        .subscribe-btn {
            display: block; width: 100%; padding: 12px; margin-top: 30px; 
            background-color: #3b82f6; color: white; border: none; border-radius: 8px;
            font-size: 16px; font-weight: bold; cursor: pointer; transition: background-color 0.3s;
        }
        .subscribe-btn:hover { background-color: #2563eb; }
    </style>
    <!-- SON: BURASI CSS KODU (STÄ°L) -->
</head>
<body>
    <div class="mac-sonucu">
        <h1>FenerbahÃ§e - Trabzonspor</h1>
        
        <!-- SKOR HESAPLAMA EJS KODU (DÃœZELTÄ°LDÄ°) -->
        <% 
            let ev_sahibi_skor = 0;
            let deplasman_skor = 0;
            olaylar.forEach(olay => {
                // SADECE 'Gol' olaylarÄ±nÄ± filtrele
                if (olay.olayTuru === 'Gol') {
                    // YENÄ° KONTROL: EÄŸer olayÄ±n 'takim' alanÄ± "FenerbahÃ§e" ise skoru artÄ±r
                    if (olay.takim === 'FenerbahÃ§e') {
                        ev_sahibi_skor++;
                    } 
                    // YENÄ° KONTROL: EÄŸer olayÄ±n 'takim' alanÄ± "Trabzonspor" ise skoru artÄ±r
                    else if (olay.takim === 'Trabzonspor') {
                        deplasman_skor++;
                    }
                }
            });
        %>
        
        <div class="skor-tablosu">
            <div class="ev-sahibi-skor">
                <h2><%= ev_sahibi_skor %></h2>
            </div>
            <div class="ayirici">
                -
            </div>
            <div class="deplasman-skor">
                <h2><%= deplasman_skor %></h2>
            </div>
        </div>
        
        <div class="olay-listesi">
            <!-- Ev Sahibi OlaylarÄ± (FenerbahÃ§e) -->
            <div class="ev-sahibi-olaylar">
                <% olaylar.filter(o => o.takim === 'FenerbahÃ§e').forEach(olay => { %>
                    <div class="oyuncu-olay">
                        <span class="dakika"><%= olay.dakika %>'</span>
                        <span class="ikon <%= olay.olayTuru === 'Gol' ? 'gol-ikonu' : olay.olayTuru.includes('Kirmizi') ? 'kirmizi-kart-ikonu' : olay.olayTuru.includes('Sari') ? 'sari-kart-ikonu' : 'kamera-ikonu' %>">
                            <%= olay.olayTuru === 'Gol' ? 'âš½' : olay.olayTuru.includes('Kirmizi') ? 'ðŸŸ¥' : olay.olayTuru.includes('Sari') ? 'ðŸŸ¨' : 'ðŸ“·' %>
                        </span>
                        <span class="oyuncu-adi"><%= olay.oyuncu %></span>
                    </div>
                <% }); %>
            </div>
            
            <!-- Deplasman OlaylarÄ± (Trabzonspor) -->
            <div class="deplasman-olaylar">
                <% olaylar.filter(o => o.takim === 'Trabzonspor').forEach(olay => { %>
                    <div class="oyuncu-olay">
                        <span class="dakika"><%= olay.dakika %>'</span>
                        <span class="ikon <%= olay.olayTuru === 'Gol' ? 'gol-ikonu' : olay.olayTuru.includes('Kirmizi') ? 'kirmizi-kart-ikonu' : olay.olayTuru.includes('Sari') ? 'sari-kart-ikonu' : 'kamera-ikonu' %>">
                            <%= olay.olayTuru === 'Gol' ? 'âš½' : olay.olayTuru.includes('Kirmizi') ? 'ðŸŸ¥' : olay.olayTuru.includes('Sari') ? 'ðŸŸ¨' : 'ðŸ“·' %>
                        </span>
                        <span class="oyuncu-adi"><%= olay.oyuncu %></span>
                    </div>
                <% }); %>
            </div>
        </div>
        
        <button class="subscribe-btn" id="subscribeBtn">Bildirimleri AÃ§</button>
        <p style="text-align: center; font-size: 12px; color: #9ca3af; margin-top: 10px;">SayfayÄ± aÃ§tÄ±ÄŸÄ±nÄ±zda bildirim izni isteyecektir.</p>
    </div>
    
    <!-- Bildirim mekanizmasÄ± iÃ§in JS -->
    <script src="/client.js"></script>
</body>
</html>
