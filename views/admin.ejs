<!DOCTYPE html>
<html lang="tr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>Sana Ã–zel Admin Paneli | MaÃ§ Olay GiriÅŸi</title>
Â  Â  <style>
Â  Â  Â  Â  body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
Â  Â  Â  Â  .container { max-width: 600px; margin: auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
Â  Â  Â  Â  h1 { text-align: center; color: #0056b3; }
Â  Â  Â  Â  h2 { border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 30px; }
Â  Â  Â  Â  label { display: block; margin-top: 10px; font-weight: bold; }
Â  Â  Â  Â  input[type="text"], input[type="number"], select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Olay Ekleme Butonu */
Â  Â  Â  Â  .olay-gonder-btn {Â 
Â  Â  Â  Â  Â  Â  background-color: #0056b3;Â 
Â  Â  Â  Â  Â  Â  color: white;Â 
Â  Â  Â  Â  Â  Â  padding: 10px 15px;Â 
Â  Â  Â  Â  Â  Â  border: none;Â 
Â  Â  Â  Â  Â  Â  border-radius: 4px;Â 
Â  Â  Â  Â  Â  Â  cursor: pointer;Â 
Â  Â  Â  Â  Â  Â  margin-top: 20px;Â 
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  .olay-gonder-btn:hover { background-color: #004494; }

Â  Â  Â  Â  .subs-info { text-align: center; font-size: 1.1em; font-weight: bold; color: #10b981; padding: 10px; border: 1px dashed #10b98150; margin-top: 15px; }

Â  Â  Â  Â  /* SÄ±fÄ±rlama Butonu */
Â  Â  Â  Â  .reset-btn {
Â  Â  Â  Â  Â  Â  background-color: #ef4444; /* KÄ±rmÄ±zÄ± renk tehlikeyi belirtir */
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  }
Â  Â  Â  Â  .reset-btn:hover { background-color: #dc2626; }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <h1>EGEMEN'Ä°N Ã–ZEL MAÃ‡ KONTROL PANELÄ°</h1>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <form action="/api/olay-ekle" method="POST">
Â  Â  Â  Â  Â  Â  <h2>Yeni MaÃ§ OlayÄ± (Gol/Kart/Kadrolar)</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <label for="macAdi">MaÃ§ AdÄ±:</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="macAdi" name="macAdi" value="FenerbahÃ§e - Trabzonspor" required>

Â  Â  Â  Â  Â  Â  <label for="olayTuru">Olay TÃ¼rÃ¼:</label>
Â  Â  Â  Â  Â  Â  <select id="olayTuru" name="olayTuru" required>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Gol">âš½ Gol</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kirmizi Kart">ğŸŸ¥ KÄ±rmÄ±zÄ± Kart</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Sari Kart">ğŸŸ¨ SarÄ± Kart</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kadrolar AÃ§Ä±klandÄ±">ğŸ‘• Kadrolar AÃ§Ä±klandÄ±</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="takim">Olay Hangi TakÄ±m Ä°Ã§in:</label>
Â  Â  Â  Â  Â  Â  <select id="takim" name="takim" required onchange="updatePlayerList()">
Â  Â  Â  Â  Â  Â  Â  Â  <option value="FenerbahÃ§e">FenerbahÃ§e</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Trabzonspor">Trabzonspor</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="Genel">Genel (Kadrolar, MaÃ§ BaÅŸladÄ± vb.)</option>
Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  <label for="dakika">Dakika (Kadrolar iÃ§in 0):</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="dakika" name="dakika" min="0" max="120" value="0">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="oyuncu">Oyuncu AdÄ± (Genel iÃ§in boÅŸ bÄ±rakÄ±n):</label>
Â  Â  Â  Â  Â  Â  <select id="oyuncu" name="oyuncu" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button type="submit" class="olay-gonder-btn">OlayÄ± Kaydet ve KullanÄ±cÄ±lara Bildirim GÃ¶nder</button>
Â  Â  Â  Â  </form>

Â  Â  Â  Â  <hr style="margin-top: 30px;">
Â  Â  Â  Â  <h2>VeritabanÄ± YÃ¶netimi</h2>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="subs-info">
Â  Â  Â  Â  Â  Â  Aktif Abone SayÄ±sÄ±: **<%= subscriptionsCount %>**
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <button class="reset-btn" id="resetBtn">ğŸš¨ TÃœM MAÃ‡ OYLARINI SIFIRLA (DÄ°KKATLÄ° OL)</button>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // Oyuncu Listeleri
Â  Â  Â  Â  const playerLists = {
Â  Â  Â  Â  Â  Â  'FenerbahÃ§e': [
Â  Â  Â  Â  Â  Â  Â  Â  'Youssef En-Nesyri',
Â  Â  Â  Â  Â  Â  Â  Â  'Okay YokuÅŸlu',
Â  Â  Â  Â  Â  Â  Â  Â  // Ekstra Oyuncular
Â  Â  Â  Â  Â  Â  Â  Â  'Serdar SaatÃ§Ä±',
Â  Â  Â  Â  Â  Â  Â  Â  'Berkay YÄ±lmaz',
Â  Â  Â  Â  Â  Â  Â  Â  'Dusan Tadic',
Â  Â  Â  Â  Â  Â  Â  Â  'Edin Dzeko'
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  'Trabzonspor': [
Â  Â  Â  Â  Â  Â  Â  Â  'Andre Onana',
Â  Â  Â  Â  Â  Â  Â  Â  'Edin Visca',
Â  Â  Â  Â  Â  Â  Â  Â  // Ekstra Oyuncular
Â  Â  Â  Â  Â  Â  Â  Â  'Umut Bozok',
Â  Â  Â  Â  Â  Â  Â  Â  'AnastÃ¡sios BakasÃ©tas',
Â  Â  Â  Â  Â  Â  Â  Â  'Trezeguet',
Â  Â  Â  Â  Â  Â  Â  Â  'Enis Bardhi'
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };

Â  Â  Â  Â  const takimSelect = document.getElementById('takim');
Â  Â  Â  Â  const oyuncuSelect = document.getElementById('oyuncu');

Â  Â  Â  Â  // Oyuncu listesini gÃ¼ncelleyen fonksiyon
Â  Â  Â  Â  function updatePlayerList() {
Â  Â  Â  Â  Â  Â  const selectedTeam = takimSelect.value;
Â  Â  Â  Â  Â  Â  oyuncuSelect.innerHTML = ''; // Ã–nce tÃ¼m seÃ§enekleri temizle

Â  Â  Â  Â  Â  Â  if (selectedTeam === 'Genel') {
Â  Â  Â  Â  Â  Â  Â  Â  oyuncuSelect.innerHTML = '<option value="">(Genel Olay)</option>';
Â  Â  Â  Â  Â  Â  Â  Â  oyuncuSelect.required = false;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  oyuncuSelect.required = true;
Â  Â  Â  Â  Â  Â  Â  Â  const players = playerLists[selectedTeam] || [];
Â  Â  Â  Â  Â  Â  Â  Â  players.forEach(player => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const option = document.createElement('option');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  option.value = player;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  option.textContent = player;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oyuncuSelect.appendChild(option);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Sayfa yÃ¼klendiÄŸinde listeyi bir kez Ã§alÄ±ÅŸtÄ±r
Â  Â  Â  Â  updatePlayerList(); 

Â  Â  Â  Â  // SIFIRLAMA BUTONU JS'si
Â  Â  Â  Â  document.getElementById('resetBtn').addEventListener('click', async () => {
Â  Â  Â  Â  Â  Â  const onay = prompt("TÃœM MAÃ‡ OLAYLARINI SÄ°LMEK Ä°STEDÄ°ÄÄ°NE EMÄ°N MÄ°SÄ°N? Evet ise 'SIL' yazÄ±p Onayla.");

Â  Â  Â  Â  Â  Â  if (onay === 'SIL') {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('/api/sifirla', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ confirm: true })Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("âœ… TÃ¼m maÃ§ olaylarÄ± baÅŸarÄ±yla silindi. Sayfa yenileniyor.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.reload();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("âŒ SÄ±fÄ±rlama iÅŸleminde bir hata oluÅŸtu.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("âŒ Sunucuya eriÅŸimde hata: " + error.message);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Ä°ÅŸlem iptal edildi.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
